<%- include("layout.ejs") %>

<div class ="d-flex align-items-center mb-3">
    <h1 class="mb-0">Blog Post</h1>
    <% if (typeof user==='undefined' && !user) { %>
        <a href="/compose" class="btn ms-3 d-flex align-items-center justify-content-center"
            style="width: 40px; height: 40px;">
            <i class="bi bi-file-earmark-plus" style="font-size: 2.5em;"></i>
        </a>
        <% } %>
            </div>

<div class ="d-flex align-items-center mb-3">
    <% if (locals.blogPosts.length> 0) { %>
        <ul>
            <% blogPosts.forEach(post=> { %>
                <li>
                    <h4>
                        <a href="/post/<%= post.id %>">
                            <%= post.title %>
                        </a>
                        <% if (typeof user==='undefined' && !user) { %>
                            <a href="/edit/<%= post.id %>" class="btn btn-outline-secondary btn-sm ms-2">
                                <i class="bi bi-pencil-square"></i>
                            </a>
                            <a href="/delete/<%= post.id %>" class="btn btn-danger btn-sm ms-2"
                                onclick="return confirm('Are you sure you want to delete this post?');">
                                <i class="bi bi-trash"></i>
                            </a>
                            <% } %>                        
                    </h4>
                    <!-- <h3><% post.date %></h3>
                    <p><%= post.content %></p> -->
                </li>
                <% }) %>
        </ul>
        <% } %>
</div>

<%- include("partials/footer.ejs") %>