<%- include("layout.ejs") %>

<div class="row justify-content-center mt-5">
    <div class="col-md-6 col-lg-5">
        <div class="full-post text-center">
            <img src="/images/my-notion-face-portrait.png" alt="Logo" width="80" height="80" class="mb-4 rounded-circle">
            <h1 class="h3 mb-4 fw-normal">Create an Account</h1>
            
            <% if (locals.error) { %>
                <div class="alert alert-danger" role="alert">
                    <%= error %>
                </div>
            <% } %>
            
            <div id="clientError" class="alert alert-danger" role="alert" style="display: none;"></div>
            
            <form action="/signup" method="POST" class="form-custom text-start">
                <div class="mb-4">
                    <label for="name" class="form-label">Full Name</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-person"></i></span>
                        <input type="text" name="name" class="form-custom-control" id="name" 
                               placeholder="Your name" required>
                    </div>
                </div>
                
                <div class="mb-4">
                    <label for="email" class="form-label">Email address</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-envelope"></i></span>
                        <input type="email" name="email" class="form-custom-control" id="email" 
                               placeholder="name@example.com" required>
                    </div>
                </div>
                
                <div class="mb-4">
                    <label for="password" class="form-label">Password</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-lock"></i></span>
                        <input type="password" name="password" class="form-custom-control" id="password" 
                               placeholder="Password (min 8 characters)" required>
                    </div>
                    <div class="form-text">Password must be at least 8 characters long.</div>
                </div>
                
                <button class="btn btn-custom btn-custom-primary w-100 py-2 mb-3" type="submit">
                    Create Account
                </button>
                
                <div class="text-center mt-4">
                    <p class="text-secondary">Already have an account? <a href="/login">Log in</a></p>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    document.querySelector('form').addEventListener('submit', function (event) {
        const name = document.querySelector('input[name="name"]').value.trim();
        const email = document.querySelector('input[name="email"]').value.trim();
        const password = document.querySelector('input[name="password"]').value.trim();
        
        let errorMessage = "";

        if (!name || !email || !password) {
            errorMessage += "All fields are required.<br>";
        }

        if (password.length < 8) {
            errorMessage += "Password must be at least 8 characters long.<br>";
        }

        const errorDiv = document.getElementById('clientError');
        if (errorMessage) {
            event.preventDefault(); // Prevent form submission
            errorDiv.innerHTML = errorMessage;
            errorDiv.style.display = 'block'; // Show the error message
        } else {
            errorDiv.style.display = 'none'; // Hide the error message
        }
    });
</script>

<%- include("partials/footer.ejs") %>